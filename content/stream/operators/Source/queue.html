<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Source.queue · Pekko Documentation</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content='Apache Pekko is a toolkit for building highly concurrent, distributed, and resilient message-driven applications for Java and Scala.'/>
<link rel="canonical" href="https://doc.akka.io/docs/akka/currentstream/operators/Source/queue.html"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:100normal,100italic,300normal,300italic,400normal,400italic,500normal,500italic,700normal,700italic,900normal,900italicc" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../../lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../js/page.js"></script>
<script type="text/javascript" src="../../../js/warnOldVersion.js"></script>
<script type="text/javascript" src="../../../js/groups.js"></script>
<script type="text/javascript" src="../../../js/snippets.js"></script>
<link rel="stylesheet" type="text/css" href="../../../lib/foundation/dist/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/page.css"/>

<!--
<link rel="shortcut icon" href="../../../images/favicon.ico" />
-->
</head>

<body>
<div class="off-canvas-wrapper">
<div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>

<div class="off-canvas position-left" id="off-canvas-menu" data-off-canvas>
<nav class="off-canvas-nav">
<div class="nav-home">
<a href="../../../index.html" >
<span class="home-icon">⌂</span>Pekko Documentation
</a>
<div class="version-number">
0.0.0+26533-ec68a528*
</div>
</div>
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
<div class="nav-toc">
<ul>
  <li><a href="../../../security/index.html" class="page">Security Announcements</a></li>
  <li><a href="../../../typed/guide/index.html" class="page">Getting Started Guide</a>
  <ul>
    <li><a href="../../../typed/guide/introduction.html" class="page">Introduction to Pekko</a></li>
    <li><a href="../../../typed/guide/actors-motivation.html" class="page">Why modern systems need a new programming model</a></li>
    <li><a href="../../../typed/guide/actors-intro.html" class="page">How the Actor Model Meets the Needs of Modern, Distributed Systems</a></li>
    <li><a href="../../../typed/guide/modules.html" class="page">Overview of Pekko libraries and modules</a></li>
    <li><a href="../../../typed/guide/tutorial.html" class="page">Introduction to the Example</a></li>
    <li><a href="../../../typed/guide/tutorial_1.html" class="page">Part 1: Actor Architecture</a></li>
    <li><a href="../../../typed/guide/tutorial_2.html" class="page">Part 2: Creating the First Actor</a></li>
    <li><a href="../../../typed/guide/tutorial_3.html" class="page">Part 3: Working with Device Actors</a></li>
    <li><a href="../../../typed/guide/tutorial_4.html" class="page">Part 4: Working with Device Groups</a></li>
    <li><a href="../../../typed/guide/tutorial_5.html" class="page">Part 5: Querying Device Groups</a></li>
  </ul></li>
  <li><a href="../../../general/index.html" class="page">General Concepts</a>
  <ul>
    <li><a href="../../../general/terminology.html" class="page">Terminology, Concepts</a></li>
    <li><a href="../../../general/actor-systems.html" class="page">Actor Systems</a></li>
    <li><a href="../../../general/actors.html" class="page">What is an Actor?</a></li>
    <li><a href="../../../general/supervision.html" class="page">Supervision and Monitoring</a></li>
    <li><a href="../../../general/addressing.html" class="page">Actor References, Paths and Addresses</a></li>
    <li><a href="../../../general/remoting.html" class="page">Location Transparency</a></li>
    <li><a href="../../../general/jmm.html" class="page">Pekko and the Java Memory Model</a></li>
    <li><a href="../../../general/message-delivery-reliability.html" class="page">Message Delivery Reliability</a></li>
    <li><a href="../../../general/configuration.html" class="page">Configuration</a></li>
    <li><a href="../../../general/configuration-reference.html" class="page">Default configuration</a></li>
  </ul></li>
  <li><a href="../../../typed/index.html" class="page">Actors</a>
  <ul>
    <li><a href="../../../typed/actors.html" class="page">Introduction to Actors</a></li>
    <li><a href="../../../typed/actor-lifecycle.html" class="page">Actor lifecycle</a></li>
    <li><a href="../../../typed/interaction-patterns.html" class="page">Interaction Patterns</a></li>
    <li><a href="../../../typed/fault-tolerance.html" class="page">Fault Tolerance</a></li>
    <li><a href="../../../typed/actor-discovery.html" class="page">Actor discovery</a></li>
    <li><a href="../../../typed/routers.html" class="page">Routers</a></li>
    <li><a href="../../../typed/stash.html" class="page">Stash</a></li>
    <li><a href="../../../typed/fsm.html" class="page">Behaviors as finite state machines</a></li>
    <li><a href="../../../coordinated-shutdown.html" class="page">Coordinated Shutdown</a></li>
    <li><a href="../../../typed/dispatchers.html" class="page">Dispatchers</a></li>
    <li><a href="../../../typed/mailboxes.html" class="page">Mailboxes</a></li>
    <li><a href="../../../typed/testing.html" class="page">Testing</a></li>
    <li><a href="../../../typed/coexisting.html" class="page">Coexistence</a></li>
    <li><a href="../../../typed/style-guide.html" class="page">Style guide</a></li>
    <li><a href="../../../typed/from-classic.html" class="page">Learning Pekko Typed from Classic</a></li>
  </ul></li>
  <li><a href="../../../typed/index-cluster.html" class="page">Cluster</a>
  <ul>
    <li><a href="../../../typed/cluster.html" class="page">Cluster Usage</a></li>
    <li><a href="../../../typed/cluster-concepts.html" class="page">Cluster Specification</a></li>
    <li><a href="../../../typed/cluster-membership.html" class="page">Cluster Membership Service</a></li>
    <li><a href="../../../typed/failure-detector.html" class="page">Phi Accrual Failure Detector</a></li>
    <li><a href="../../../typed/distributed-data.html" class="page">Distributed Data</a></li>
    <li><a href="../../../typed/cluster-singleton.html" class="page">Cluster Singleton</a></li>
    <li><a href="../../../typed/cluster-sharding.html" class="page">Cluster Sharding</a></li>
    <li><a href="../../../typed/cluster-sharding-concepts.html" class="page">Cluster Sharding concepts</a></li>
    <li><a href="../../../typed/cluster-sharded-daemon-process.html" class="page">Sharded Daemon Process</a></li>
    <li><a href="../../../typed/cluster-dc.html" class="page">Multi-DC Cluster</a></li>
    <li><a href="../../../typed/distributed-pub-sub.html" class="page">Distributed Publish Subscribe in Cluster</a></li>
    <li><a href="../../../typed/reliable-delivery.html" class="page">Reliable delivery</a></li>
    <li><a href="../../../serialization.html" class="page">Serialization</a></li>
    <li><a href="../../../serialization-jackson.html" class="page">Serialization with Jackson</a></li>
    <li><a href="../../../multi-jvm-testing.html" class="page">Multi JVM Testing</a></li>
    <li><a href="../../../multi-node-testing.html" class="page">Multi Node Testing</a></li>
    <li><a href="../../../remoting-artery.html" class="page">Artery Remoting</a></li>
    <li><a href="../../../remoting.html" class="page">Classic Remoting (Deprecated)</a></li>
    <li><a href="../../../split-brain-resolver.html" class="page">Split Brain Resolver</a></li>
    <li><a href="../../../coordination.html" class="page">Coordination</a></li>
    <li><a href="../../../typed/choosing-cluster.html" class="page">Choosing Pekko Cluster</a></li>
  </ul></li>
  <li><a href="../../../typed/index-persistence.html" class="page">Persistence (Event Sourcing)</a>
  <ul>
    <li><a href="../../../typed/persistence.html" class="page">Event Sourcing</a></li>
    <li><a href="../../../typed/replicated-eventsourcing.html" class="page">Replicated Event Sourcing</a></li>
    <li><a href="../../../typed/cqrs.html" class="page">CQRS</a></li>
    <li><a href="../../../typed/persistence-style.html" class="page">Style Guide</a></li>
    <li><a href="../../../typed/persistence-snapshot.html" class="page">Snapshotting</a></li>
    <li><a href="../../../typed/persistence-testing.html" class="page">Testing</a></li>
    <li><a href="../../../typed/persistence-fsm.html" class="page">EventSourced behaviors as finite state machines</a></li>
    <li><a href="../../../persistence-schema-evolution.html" class="page">Schema Evolution for Event Sourced Actors</a></li>
    <li><a href="../../../persistence-query.html" class="page">Persistence Query</a></li>
    <li><a href="../../../persistence-query-leveldb.html" class="page">Persistence Query for LevelDB</a></li>
    <li><a href="../../../persistence-plugins.html" class="page">Persistence Plugins</a></li>
    <li><a href="../../../persistence-journals.html" class="page">Persistence - Building a storage backend</a></li>
    <li><a href="../../../typed/replicated-eventsourcing-examples.html" class="page">Replicated Event Sourcing Examples</a></li>
  </ul></li>
  <li><a href="../../../typed/index-persistence-durable-state.html" class="page">Persistence (Durable State)</a>
  <ul>
    <li><a href="../../../typed/durable-state/persistence.html" class="page">Durable State</a></li>
    <li><a href="../../../typed/durable-state/persistence-style.html" class="page">Style Guide</a></li>
    <li><a href="../../../typed/durable-state/cqrs.html" class="page">CQRS</a></li>
    <li><a href="../../../durable-state/persistence-query.html" class="page">Persistence Query</a></li>
  </ul></li>
  <li><a href="../../../stream/index.html" class="page">Streams</a>
  <ul>
    <li><a href="../../../stream/stream-introduction.html" class="page">Introduction</a></li>
    <li><a href="../../../stream/stream-quickstart.html" class="page">Streams Quickstart Guide</a></li>
    <li><a href="../../../general/stream/stream-design.html" class="page">Design Principles behind Pekko Streams</a></li>
    <li><a href="../../../stream/stream-flows-and-basics.html" class="page">Basics and working with Flows</a></li>
    <li><a href="../../../stream/stream-graphs.html" class="page">Working with Graphs</a></li>
    <li><a href="../../../stream/stream-composition.html" class="page">Modularity, Composition and Hierarchy</a></li>
    <li><a href="../../../stream/stream-rate.html" class="page">Buffers and working with rate</a></li>
    <li><a href="../../../stream/stream-context.html" class="page">Context Propagation</a></li>
    <li><a href="../../../stream/stream-dynamic.html" class="page">Dynamic stream handling</a></li>
    <li><a href="../../../stream/stream-customize.html" class="page">Custom stream processing</a></li>
    <li><a href="../../../stream/futures-interop.html" class="page">Futures interop</a></li>
    <li><a href="../../../stream/actor-interop.html" class="page">Actors interop</a></li>
    <li><a href="../../../stream/reactive-streams-interop.html" class="page">Reactive Streams Interop</a></li>
    <li><a href="../../../stream/stream-error.html" class="page">Error Handling in Streams</a></li>
    <li><a href="../../../stream/stream-io.html" class="page">Working with streaming IO</a></li>
    <li><a href="../../../stream/stream-refs.html" class="page">StreamRefs - Reactive Streams over the network</a></li>
    <li><a href="../../../stream/stream-parallelism.html" class="page">Pipelining and Parallelism</a></li>
    <li><a href="../../../stream/stream-testkit.html" class="page">Testing streams</a></li>
    <li><a href="../../../stream/stream-substream.html" class="page">Substreams</a></li>
    <li><a href="../../../stream/stream-cookbook.html" class="page">Streams Cookbook</a></li>
    <li><a href="../../../general/stream/stream-configuration.html" class="page">Configuration</a></li>
    <li><a href="../../../stream/operators/index.html" class="page">Operators</a></li>
  </ul></li>
  <li><a href="../../../discovery/index.html" class="page">Discovery</a></li>
  <li><a href="../../../index-utilities.html" class="page">Utilities</a>
  <ul>
    <li><a href="../../../typed/logging.html" class="page">Logging</a></li>
    <li><a href="../../../common/circuitbreaker.html" class="page">Circuit Breaker</a></li>
    <li><a href="../../../futures.html" class="page">Futures patterns</a></li>
    <li><a href="../../../typed/extending.html" class="page">Extending Pekko</a></li>
  </ul></li>
  <li><a href="../../../common/other-modules.html" class="page">Other Pekko modules</a></li>
  <li><a href="../../../additional/deploy.html" class="page">Package, Deploy and Run</a>
  <ul>
    <li><a href="../../../additional/packaging.html" class="page">Packaging</a></li>
    <li><a href="../../../additional/operations.html" class="page">Operating a Cluster</a></li>
    <li><a href="../../../additional/deploying.html" class="page">Deploying</a></li>
    <li><a href="../../../additional/rolling-updates.html" class="page">Rolling Updates</a></li>
  </ul></li>
  <li><a href="../../../project/index.html" class="page">Project Information</a>
  <ul>
    <li><a href="../../../common/binary-compatibility-rules.html" class="page">Binary Compatibility Rules</a></li>
    <li><a href="../../../project/scala3.html" class="page">Scala 3 support</a></li>
    <li><a href="../../../project/downstream-upgrade-strategy.html" class="page">Downstream upgrade strategy</a></li>
    <li><a href="../../../common/may-change.html" class="page">Modules marked &ldquo;May Change&rdquo;</a></li>
    <li><a href="../../../additional/ide.html" class="page">IDE Tips</a></li>
    <li><a href="../../../project/immutable.html" class="page">Immutability using Lombok</a></li>
    <li><a href="../../../additional/osgi.html" class="page">Pekko in OSGi</a></li>
    <li><a href="../../../project/migration-guides.html" class="page">Migration Guides</a></li>
    <li><a href="../../../project/rolling-update.html" class="page">Rolling Updates and Versions</a></li>
    <li><a href="../../../project/issue-tracking.html" class="page">Issue Tracking</a></li>
    <li><a href="../../../project/licenses.html" class="page">Licenses</a></li>
    <li><a href="../../../additional/faq.html" class="page">Frequently Asked Questions</a></li>
    <li><a href="../../../additional/books.html" class="page">Books and Videos</a></li>
    <li><a href="../../../project/examples.html" class="page">Example projects</a></li>
    <li><a href="../../../project/links.html" class="page">Project</a></li>
  </ul></li>
  <li><a href="../../../index-classic.html" class="page">Pekko Classic</a>
  <ul>
    <li><a href="../../../index-actors.html" class="page">Classic Actors</a></li>
    <li><a href="../../../index-cluster.html" class="page">Classic Clustering</a></li>
    <li><a href="../../../index-network.html" class="page">Classic Networking</a></li>
    <li><a href="../../../index-utilities-classic.html" class="page">Classic Utilities</a></li>
  </ul></li>
</ul>
</div>

</nav>
</div>

<div class="off-canvas-content" data-off-canvas-content>

<header class="site-header expanded row">
<div class="small-12 column">
<a href="#" class="off-canvas-toggle hide-for-medium" data-toggle="off-canvas-menu"><svg class="svg-icon svg-icon-menu" version="1.1" id="Menu" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"> <path class="svg-icon-menu-path" fill="#53CDEC" d="M16.4,9H3.6C3.048,9,3,9.447,3,10c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,9.447,16.952,9,16.4,9z M16.4,13
H3.6C3.048,13,3,13.447,3,14c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,13.447,16.952,13,16.4,13z M3.6,7H16.4
C16.952,7,17,6.553,17,6c0-0.553-0.048-1-0.6-1H3.6C3.048,5,3,5.447,3,6C3,6.553,3.048,7,3.6,7z"/></svg>
</a>
<div class="title"><a href="../../../index.html">Pekko Documentation</a></div>

<!--
<a href="https://www.example.com" class="logo show-for-medium">logo</a>
-->
</div>
</header>

<div class="expanded row">

<div class="medium-3 large-2 show-for-medium column">
<nav class="site-nav">
<div class="nav-home">
<a href="../../../index.html" >
<span class="home-icon">⌂</span>Pekko Documentation
</a>
<div class="version-number">
0.0.0+26533-ec68a528*
</div>
</div>
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
<div class="nav-toc">
<ul>
  <li><a href="../../../security/index.html" class="page">Security Announcements</a></li>
  <li><a href="../../../typed/guide/index.html" class="page">Getting Started Guide</a>
  <ul>
    <li><a href="../../../typed/guide/introduction.html" class="page">Introduction to Pekko</a></li>
    <li><a href="../../../typed/guide/actors-motivation.html" class="page">Why modern systems need a new programming model</a></li>
    <li><a href="../../../typed/guide/actors-intro.html" class="page">How the Actor Model Meets the Needs of Modern, Distributed Systems</a></li>
    <li><a href="../../../typed/guide/modules.html" class="page">Overview of Pekko libraries and modules</a></li>
    <li><a href="../../../typed/guide/tutorial.html" class="page">Introduction to the Example</a></li>
    <li><a href="../../../typed/guide/tutorial_1.html" class="page">Part 1: Actor Architecture</a></li>
    <li><a href="../../../typed/guide/tutorial_2.html" class="page">Part 2: Creating the First Actor</a></li>
    <li><a href="../../../typed/guide/tutorial_3.html" class="page">Part 3: Working with Device Actors</a></li>
    <li><a href="../../../typed/guide/tutorial_4.html" class="page">Part 4: Working with Device Groups</a></li>
    <li><a href="../../../typed/guide/tutorial_5.html" class="page">Part 5: Querying Device Groups</a></li>
  </ul></li>
  <li><a href="../../../general/index.html" class="page">General Concepts</a>
  <ul>
    <li><a href="../../../general/terminology.html" class="page">Terminology, Concepts</a></li>
    <li><a href="../../../general/actor-systems.html" class="page">Actor Systems</a></li>
    <li><a href="../../../general/actors.html" class="page">What is an Actor?</a></li>
    <li><a href="../../../general/supervision.html" class="page">Supervision and Monitoring</a></li>
    <li><a href="../../../general/addressing.html" class="page">Actor References, Paths and Addresses</a></li>
    <li><a href="../../../general/remoting.html" class="page">Location Transparency</a></li>
    <li><a href="../../../general/jmm.html" class="page">Pekko and the Java Memory Model</a></li>
    <li><a href="../../../general/message-delivery-reliability.html" class="page">Message Delivery Reliability</a></li>
    <li><a href="../../../general/configuration.html" class="page">Configuration</a></li>
    <li><a href="../../../general/configuration-reference.html" class="page">Default configuration</a></li>
  </ul></li>
  <li><a href="../../../typed/index.html" class="page">Actors</a>
  <ul>
    <li><a href="../../../typed/actors.html" class="page">Introduction to Actors</a></li>
    <li><a href="../../../typed/actor-lifecycle.html" class="page">Actor lifecycle</a></li>
    <li><a href="../../../typed/interaction-patterns.html" class="page">Interaction Patterns</a></li>
    <li><a href="../../../typed/fault-tolerance.html" class="page">Fault Tolerance</a></li>
    <li><a href="../../../typed/actor-discovery.html" class="page">Actor discovery</a></li>
    <li><a href="../../../typed/routers.html" class="page">Routers</a></li>
    <li><a href="../../../typed/stash.html" class="page">Stash</a></li>
    <li><a href="../../../typed/fsm.html" class="page">Behaviors as finite state machines</a></li>
    <li><a href="../../../coordinated-shutdown.html" class="page">Coordinated Shutdown</a></li>
    <li><a href="../../../typed/dispatchers.html" class="page">Dispatchers</a></li>
    <li><a href="../../../typed/mailboxes.html" class="page">Mailboxes</a></li>
    <li><a href="../../../typed/testing.html" class="page">Testing</a></li>
    <li><a href="../../../typed/coexisting.html" class="page">Coexistence</a></li>
    <li><a href="../../../typed/style-guide.html" class="page">Style guide</a></li>
    <li><a href="../../../typed/from-classic.html" class="page">Learning Pekko Typed from Classic</a></li>
  </ul></li>
  <li><a href="../../../typed/index-cluster.html" class="page">Cluster</a>
  <ul>
    <li><a href="../../../typed/cluster.html" class="page">Cluster Usage</a></li>
    <li><a href="../../../typed/cluster-concepts.html" class="page">Cluster Specification</a></li>
    <li><a href="../../../typed/cluster-membership.html" class="page">Cluster Membership Service</a></li>
    <li><a href="../../../typed/failure-detector.html" class="page">Phi Accrual Failure Detector</a></li>
    <li><a href="../../../typed/distributed-data.html" class="page">Distributed Data</a></li>
    <li><a href="../../../typed/cluster-singleton.html" class="page">Cluster Singleton</a></li>
    <li><a href="../../../typed/cluster-sharding.html" class="page">Cluster Sharding</a></li>
    <li><a href="../../../typed/cluster-sharding-concepts.html" class="page">Cluster Sharding concepts</a></li>
    <li><a href="../../../typed/cluster-sharded-daemon-process.html" class="page">Sharded Daemon Process</a></li>
    <li><a href="../../../typed/cluster-dc.html" class="page">Multi-DC Cluster</a></li>
    <li><a href="../../../typed/distributed-pub-sub.html" class="page">Distributed Publish Subscribe in Cluster</a></li>
    <li><a href="../../../typed/reliable-delivery.html" class="page">Reliable delivery</a></li>
    <li><a href="../../../serialization.html" class="page">Serialization</a></li>
    <li><a href="../../../serialization-jackson.html" class="page">Serialization with Jackson</a></li>
    <li><a href="../../../multi-jvm-testing.html" class="page">Multi JVM Testing</a></li>
    <li><a href="../../../multi-node-testing.html" class="page">Multi Node Testing</a></li>
    <li><a href="../../../remoting-artery.html" class="page">Artery Remoting</a></li>
    <li><a href="../../../remoting.html" class="page">Classic Remoting (Deprecated)</a></li>
    <li><a href="../../../split-brain-resolver.html" class="page">Split Brain Resolver</a></li>
    <li><a href="../../../coordination.html" class="page">Coordination</a></li>
    <li><a href="../../../typed/choosing-cluster.html" class="page">Choosing Pekko Cluster</a></li>
  </ul></li>
  <li><a href="../../../typed/index-persistence.html" class="page">Persistence (Event Sourcing)</a>
  <ul>
    <li><a href="../../../typed/persistence.html" class="page">Event Sourcing</a></li>
    <li><a href="../../../typed/replicated-eventsourcing.html" class="page">Replicated Event Sourcing</a></li>
    <li><a href="../../../typed/cqrs.html" class="page">CQRS</a></li>
    <li><a href="../../../typed/persistence-style.html" class="page">Style Guide</a></li>
    <li><a href="../../../typed/persistence-snapshot.html" class="page">Snapshotting</a></li>
    <li><a href="../../../typed/persistence-testing.html" class="page">Testing</a></li>
    <li><a href="../../../typed/persistence-fsm.html" class="page">EventSourced behaviors as finite state machines</a></li>
    <li><a href="../../../persistence-schema-evolution.html" class="page">Schema Evolution for Event Sourced Actors</a></li>
    <li><a href="../../../persistence-query.html" class="page">Persistence Query</a></li>
    <li><a href="../../../persistence-query-leveldb.html" class="page">Persistence Query for LevelDB</a></li>
    <li><a href="../../../persistence-plugins.html" class="page">Persistence Plugins</a></li>
    <li><a href="../../../persistence-journals.html" class="page">Persistence - Building a storage backend</a></li>
    <li><a href="../../../typed/replicated-eventsourcing-examples.html" class="page">Replicated Event Sourcing Examples</a></li>
  </ul></li>
  <li><a href="../../../typed/index-persistence-durable-state.html" class="page">Persistence (Durable State)</a>
  <ul>
    <li><a href="../../../typed/durable-state/persistence.html" class="page">Durable State</a></li>
    <li><a href="../../../typed/durable-state/persistence-style.html" class="page">Style Guide</a></li>
    <li><a href="../../../typed/durable-state/cqrs.html" class="page">CQRS</a></li>
    <li><a href="../../../durable-state/persistence-query.html" class="page">Persistence Query</a></li>
  </ul></li>
  <li><a href="../../../stream/index.html" class="page">Streams</a>
  <ul>
    <li><a href="../../../stream/stream-introduction.html" class="page">Introduction</a></li>
    <li><a href="../../../stream/stream-quickstart.html" class="page">Streams Quickstart Guide</a></li>
    <li><a href="../../../general/stream/stream-design.html" class="page">Design Principles behind Pekko Streams</a></li>
    <li><a href="../../../stream/stream-flows-and-basics.html" class="page">Basics and working with Flows</a></li>
    <li><a href="../../../stream/stream-graphs.html" class="page">Working with Graphs</a></li>
    <li><a href="../../../stream/stream-composition.html" class="page">Modularity, Composition and Hierarchy</a></li>
    <li><a href="../../../stream/stream-rate.html" class="page">Buffers and working with rate</a></li>
    <li><a href="../../../stream/stream-context.html" class="page">Context Propagation</a></li>
    <li><a href="../../../stream/stream-dynamic.html" class="page">Dynamic stream handling</a></li>
    <li><a href="../../../stream/stream-customize.html" class="page">Custom stream processing</a></li>
    <li><a href="../../../stream/futures-interop.html" class="page">Futures interop</a></li>
    <li><a href="../../../stream/actor-interop.html" class="page">Actors interop</a></li>
    <li><a href="../../../stream/reactive-streams-interop.html" class="page">Reactive Streams Interop</a></li>
    <li><a href="../../../stream/stream-error.html" class="page">Error Handling in Streams</a></li>
    <li><a href="../../../stream/stream-io.html" class="page">Working with streaming IO</a></li>
    <li><a href="../../../stream/stream-refs.html" class="page">StreamRefs - Reactive Streams over the network</a></li>
    <li><a href="../../../stream/stream-parallelism.html" class="page">Pipelining and Parallelism</a></li>
    <li><a href="../../../stream/stream-testkit.html" class="page">Testing streams</a></li>
    <li><a href="../../../stream/stream-substream.html" class="page">Substreams</a></li>
    <li><a href="../../../stream/stream-cookbook.html" class="page">Streams Cookbook</a></li>
    <li><a href="../../../general/stream/stream-configuration.html" class="page">Configuration</a></li>
    <li><a href="../../../stream/operators/index.html" class="page">Operators</a></li>
  </ul></li>
  <li><a href="../../../discovery/index.html" class="page">Discovery</a></li>
  <li><a href="../../../index-utilities.html" class="page">Utilities</a>
  <ul>
    <li><a href="../../../typed/logging.html" class="page">Logging</a></li>
    <li><a href="../../../common/circuitbreaker.html" class="page">Circuit Breaker</a></li>
    <li><a href="../../../futures.html" class="page">Futures patterns</a></li>
    <li><a href="../../../typed/extending.html" class="page">Extending Pekko</a></li>
  </ul></li>
  <li><a href="../../../common/other-modules.html" class="page">Other Pekko modules</a></li>
  <li><a href="../../../additional/deploy.html" class="page">Package, Deploy and Run</a>
  <ul>
    <li><a href="../../../additional/packaging.html" class="page">Packaging</a></li>
    <li><a href="../../../additional/operations.html" class="page">Operating a Cluster</a></li>
    <li><a href="../../../additional/deploying.html" class="page">Deploying</a></li>
    <li><a href="../../../additional/rolling-updates.html" class="page">Rolling Updates</a></li>
  </ul></li>
  <li><a href="../../../project/index.html" class="page">Project Information</a>
  <ul>
    <li><a href="../../../common/binary-compatibility-rules.html" class="page">Binary Compatibility Rules</a></li>
    <li><a href="../../../project/scala3.html" class="page">Scala 3 support</a></li>
    <li><a href="../../../project/downstream-upgrade-strategy.html" class="page">Downstream upgrade strategy</a></li>
    <li><a href="../../../common/may-change.html" class="page">Modules marked &ldquo;May Change&rdquo;</a></li>
    <li><a href="../../../additional/ide.html" class="page">IDE Tips</a></li>
    <li><a href="../../../project/immutable.html" class="page">Immutability using Lombok</a></li>
    <li><a href="../../../additional/osgi.html" class="page">Pekko in OSGi</a></li>
    <li><a href="../../../project/migration-guides.html" class="page">Migration Guides</a></li>
    <li><a href="../../../project/rolling-update.html" class="page">Rolling Updates and Versions</a></li>
    <li><a href="../../../project/issue-tracking.html" class="page">Issue Tracking</a></li>
    <li><a href="../../../project/licenses.html" class="page">Licenses</a></li>
    <li><a href="../../../additional/faq.html" class="page">Frequently Asked Questions</a></li>
    <li><a href="../../../additional/books.html" class="page">Books and Videos</a></li>
    <li><a href="../../../project/examples.html" class="page">Example projects</a></li>
    <li><a href="../../../project/links.html" class="page">Project</a></li>
  </ul></li>
  <li><a href="../../../index-classic.html" class="page">Pekko Classic</a>
  <ul>
    <li><a href="../../../index-actors.html" class="page">Classic Actors</a></li>
    <li><a href="../../../index-cluster.html" class="page">Classic Clustering</a></li>
    <li><a href="../../../index-network.html" class="page">Classic Networking</a></li>
    <li><a href="../../../index-utilities-classic.html" class="page">Classic Utilities</a></li>
  </ul></li>
</ul>
</div>

</nav>
</div>

<div class="small-12 medium-9 large-10 column">
<section class="site-content">

<span id="version-warning"></span>

<div class="page-header row">
<div class="medium-12 show-for-medium column">
<div class="nav-breadcrumbs">
<ul>
  <li><a href="../../../index.html">Pekko Documentation</a></li>
  <li><a href="../../../stream/index.html">Streams</a></li>
  <li><a href="../../../stream/operators/index.html">Operators</a></li>
  <li>Source.queue</li>
</ul>
</div>
</div>
</div>

<div class="page-content row">
<div class="small-12 large-9 column" id="docs">
<h1><a href="#source-queue" name="source-queue" class="anchor"><span class="anchor-link"></span></a>Source.queue</h1>
<p>Materialize a <code>BoundedSourceQueue</code> or <code>SourceQueue</code> onto which elements can be pushed for emitting from the source.</p>
<p><a href="../index.html#source-operators">Source operators</a></p>
<h2><a href="#signature-boundedsourcequeue-" name="signature-boundedsourcequeue-" class="anchor"><span class="anchor-link"></span></a>Signature (<code>BoundedSourceQueue</code>)</h2>
<p><span class="group-java"><a href="https://doc.akka.io/api/akka/0.0.0+26533-ec68a528-SNAPSHOT/org/apache/pekko/stream/javadsl/Source$.html#queue(int)" title="org.apache.pekko.stream.javadsl.Source"><code>Source.queue</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka/0.0.0+26533-ec68a528-SNAPSHOT/org/apache/pekko/stream/scaladsl/Source$.html#queue[T](bufferSize:Int):org.apache.pekko.stream.scaladsl.Source[T,org.apache.pekko.stream.scaladsl.BoundedSourceQueue[T]]" title="org.apache.pekko.stream.scaladsl.Source"><code>Source.queue</code></a></span></p>
<h2><a href="#description-boundedsourcequeue-" name="description-boundedsourcequeue-" class="anchor"><span class="anchor-link"></span></a>Description (<code>BoundedSourceQueue</code>)</h2>
<p>The <code>BoundedSourceQueue</code> is an optimized variant of the <code>SourceQueue</code> with <code>OverflowStrategy.dropNew</code>. The <code>BoundedSourceQueue</code> will give immediate, synchronous feedback whether an element was accepted or not and is therefore recommended for situations where overload and dropping elements is expected and needs to be handled quickly.</p>
<p>In contrast, the <code>SourceQueue</code> offers more variety of <code>OverflowStrategies</code> but feedback is only asynchronously provided through a <span class="group-scala"><code>Future</code></span><span class="group-java"><code>CompletionStage</code></span> value. In cases where elements need to be discarded quickly at times of overload to avoid out-of-memory situations, delivering feedback asynchronously can itself become a problem. This happens if elements come in faster than the feedback can be delivered in which case the feedback mechanism itself is part of the reason that an out-of-memory situation arises.</p>
<p>In summary, prefer <code>BoundedSourceQueue</code> over <code>SourceQueue</code> with <code>OverflowStrategy.dropNew</code> especially in high-load scenarios. Use <code>SourceQueue</code> if you need one of the other <code>OverflowStrategies</code>.</p>
<p>The <code>BoundedSourceQueue</code> contains a buffer that can be used by many producers on different threads. When the buffer is full, the <code>BoundedSourceQueue</code> will not accept more elements. The return value of <code>BoundedSourceQueue.offer()</code> immediately returns a <code>QueueOfferResult</code> (as opposed to an asynchronous value returned by <code>SourceQueue</code>). A synchronous result is important in order to avoid situations where offer acknowledgements are handled slower than the rate of which elements are offered, which will eventually lead to an Out Of Memory error.</p>
<h2><a href="#example-boundedsourcequeue-" name="example-boundedsourcequeue-" class="anchor"><span class="anchor-link"></span></a>Example (<code>BoundedSourceQueue</code>)</h2>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/main/docs/src/test/scala/docs/stream/IntegrationDocSpec.scala#L506-L530" target="_blank" title="Go to snippet source">source</a><code class="language-scala">val bufferSize = 1000

val queue = Source
  .queue[Int](bufferSize)
  .map(x =&gt; x * x)
  .toMat(Sink.foreach(x =&gt; println(s&quot;completed $x&quot;)))(Keep.left)
  .run()

val fastElements = 1 to 10

implicit val ec = system.dispatcher
fastElements.foreach { x =&gt;
  queue.offer(x) match {
    case QueueOfferResult.Enqueued    =&gt; println(s&quot;enqueued $x&quot;)
    case QueueOfferResult.Dropped     =&gt; println(s&quot;dropped $x&quot;)
    case QueueOfferResult.Failure(ex) =&gt; println(s&quot;Offer failed ${ex.getMessage}&quot;)
    case QueueOfferResult.QueueClosed =&gt; println(&quot;Source Queue closed&quot;)
  }
}</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/main/docs/src/test/java/jdocs/stream/IntegrationDocTest.java#L784-L811" target="_blank" title="Go to snippet source">source</a><code class="language-java">int bufferSize = 10;
int elementsToProcess = 5;

BoundedSourceQueue&lt;Integer&gt; sourceQueue =
    Source.&lt;Integer&gt;queue(bufferSize)
        .throttle(elementsToProcess, Duration.ofSeconds(3))
        .map(x -&gt; x * x)
        .to(Sink.foreach(x -&gt; System.out.println(&quot;got: &quot; + x)))
        .run(system);

List&lt;Integer&gt; fastElements = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);

fastElements.stream()
    .forEach(
        x -&gt; {
          QueueOfferResult result = sourceQueue.offer(x);
          if (result == QueueOfferResult.enqueued()) {
            System.out.println(&quot;enqueued &quot; + x);
          } else if (result == QueueOfferResult.dropped()) {
            System.out.println(&quot;dropped &quot; + x);
          } else if (result instanceof QueueOfferResult.Failure) {
            QueueOfferResult.Failure failure = (QueueOfferResult.Failure) result;
            System.out.println(&quot;Offer failed &quot; + failure.cause().getMessage());
          } else if (result instanceof QueueOfferResult.QueueClosed$) {
            System.out.println(&quot;Bounded Source Queue closed&quot;);
          }
        });
</code></pre></dd>
</dl>
<h2><a href="#signature-sourcequeue-" name="signature-sourcequeue-" class="anchor"><span class="anchor-link"></span></a>Signature (<code>SourceQueue</code>)</h2>
<p><span class="group-java"><a href="https://doc.akka.io/api/akka/0.0.0+26533-ec68a528-SNAPSHOT/org/apache/pekko/stream/javadsl/Source$.html#queue(int,org.apache.pekko.stream.OverflowStrategy)" title="org.apache.pekko.stream.javadsl.Source"><code>Source.queue</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka/0.0.0+26533-ec68a528-SNAPSHOT/org/apache/pekko/stream/scaladsl/Source$.html#queue[T](bufferSize:Int,overflowStrategy:org.apache.pekko.stream.OverflowStrategy):org.apache.pekko.stream.scaladsl.Source[T,org.apache.pekko.stream.scaladsl.SourceQueueWithComplete[T]]" title="org.apache.pekko.stream.scaladsl.Source"><code>Source.queue</code></a></span> <span class="group-java"><a href="https://doc.akka.io/api/akka/0.0.0+26533-ec68a528-SNAPSHOT/org/apache/pekko/stream/javadsl/Source$.html#queue(int,org.apache.pekko.stream.OverflowStrategy,int)" title="org.apache.pekko.stream.javadsl.Source"><code>Source.queue</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka/0.0.0+26533-ec68a528-SNAPSHOT/org/apache/pekko/stream/scaladsl/Source$.html#queue[T](bufferSize:Int,overflowStrategy:org.apache.pekko.stream.OverflowStrategy,maxConcurrentOffers:Int):org.apache.pekko.stream.scaladsl.Source[T,org.apache.pekko.stream.scaladsl.SourceQueueWithComplete[T]]" title="org.apache.pekko.stream.scaladsl.Source"><code>Source.queue</code></a></span></p>
<h2><a href="#description-sourcequeue-" name="description-sourcequeue-" class="anchor"><span class="anchor-link"></span></a>Description (<code>SourceQueue</code>)</h2>
<p>Materialize a <code>SourceQueue</code> onto which elements can be pushed for emitting from the source. The queue contains a buffer, if elements are pushed onto the queue faster than the source is consumed the overflow will be handled with a strategy specified by the user. Functionality for tracking when an element has been emitted is available through <code>SourceQueue.offer</code>.</p>
<p>Using <code>Source.queue</code> you can push elements to the queue and they will be emitted to the stream if there is demand from downstream, otherwise they will be buffered until request for demand is received. Elements in the buffer will be discarded if downstream is terminated.</p>
<p>In combination with the queue, the <a href="../Source-or-Flow/throttle.html"><code>throttle</code></a> operator can be used to control the processing to a given limit, e.g. <code>5 elements</code> per <code>3 seconds</code>.</p>
<h2><a href="#example-sourcequeue-" name="example-sourcequeue-" class="anchor"><span class="anchor-link"></span></a>Example (<code>SourceQueue</code>)</h2>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/main/docs/src/test/scala/docs/stream/IntegrationDocSpec.scala#L478-L500" target="_blank" title="Go to snippet source">source</a><code class="language-scala">val bufferSize = 10
val elementsToProcess = 5

val queue = Source
  .queue[Int](bufferSize)
  .throttle(elementsToProcess, 3.second)
  .map(x =&gt; x * x)
  .toMat(Sink.foreach(x =&gt; println(s&quot;completed $x&quot;)))(Keep.left)
  .run()

val source = Source(1 to 10)

implicit val ec = system.dispatcher
source
  .map(x =&gt; {
    queue.offer(x).map {
      case QueueOfferResult.Enqueued    =&gt; println(s&quot;enqueued $x&quot;)
      case QueueOfferResult.Dropped     =&gt; println(s&quot;dropped $x&quot;)
      case QueueOfferResult.Failure(ex) =&gt; println(s&quot;Offer failed ${ex.getMessage}&quot;)
      case QueueOfferResult.QueueClosed =&gt; println(&quot;Source Queue closed&quot;)
    }
  })
  .runWith(Sink.ignore)</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/akka/akka/tree/main/docs/src/test/java/jdocs/stream/IntegrationDocTest.java#L760-L773" target="_blank" title="Go to snippet source">source</a><code class="language-java">int bufferSize = 10;
int elementsToProcess = 5;

BoundedSourceQueue&lt;Integer&gt; sourceQueue =
    Source.&lt;Integer&gt;queue(bufferSize)
        .throttle(elementsToProcess, Duration.ofSeconds(3))
        .map(x -&gt; x * x)
        .to(Sink.foreach(x -&gt; System.out.println(&quot;got: &quot; + x)))
        .run(system);

Source&lt;Integer, NotUsed&gt; source = Source.from(Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10));

source.map(x -&gt; sourceQueue.offer(x)).runWith(Sink.ignore(), system);
</code></pre></dd>
</dl>
<h2><a href="#reactive-streams-semantics" name="reactive-streams-semantics" class="anchor"><span class="anchor-link"></span></a>Reactive Streams semantics</h2><div class="callout">
<p><strong>emits</strong> when there is demand and the queue contains elements</p>
<p><strong>completes</strong> when downstream completes</p></div>
<div class="source-github">
The source code for this page can be found <a href="https://github.com/akka/akka/tree/main/docs/src/main/paradox/stream/operators/Source/queue.md">here</a>.
</div>

<div class="nav-next">
<p><strong>Next:</strong> <a href="../../../stream/operators/Sink/queue.html">Sink.queue</a></p>
</div>
</div>
<div class="large-3 show-for-large column" data-sticky-container>
<nav class="sidebar sticky" data-sticky data-anchor="docs" data-sticky-on="large">
<div class="page-nav">
<div class="nav-title">On this page:</div>
<div class="nav-toc">
<ul>
  <li><a href="../../../stream/operators/Source/queue.html#source-queue" class="header">Source.queue</a>
  <ul>
    <li><a href="../../../stream/operators/Source/queue.html#signature-boundedsourcequeue-" class="header">Signature (<code>BoundedSourceQueue</code>)</a></li>
    <li><a href="../../../stream/operators/Source/queue.html#description-boundedsourcequeue-" class="header">Description (<code>BoundedSourceQueue</code>)</a></li>
    <li><a href="../../../stream/operators/Source/queue.html#example-boundedsourcequeue-" class="header">Example (<code>BoundedSourceQueue</code>)</a></li>
    <li><a href="../../../stream/operators/Source/queue.html#signature-sourcequeue-" class="header">Signature (<code>SourceQueue</code>)</a></li>
    <li><a href="../../../stream/operators/Source/queue.html#description-sourcequeue-" class="header">Description (<code>SourceQueue</code>)</a></li>
    <li><a href="../../../stream/operators/Source/queue.html#example-sourcequeue-" class="header">Example (<code>SourceQueue</code>)</a></li>
    <li><a href="../../../stream/operators/Source/queue.html#reactive-streams-semantics" class="header">Reactive Streams semantics</a></li>
  </ul></li>
</ul>
</div>
</div>
</nav>
</div>
</div>

</section>
</div>

</div>

<footer class="site-footer">

<section class="site-footer-nav">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 medium-4 large-3 text-center column">
<div class="nav-links">
<ul>
<!-- <li><a href="https://www.example.com/products/">Products</a> -->
</ul>
</div>
</div>

</div>
</div>
</div>
</section>

<section class="site-footer-base">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 text-center large-9 column">

<!--
<div class="copyright">
<span class="text">&copy; 2023</span>
<a href="https://www.example.com" class="logo">logo</a>
</div>
-->
</div>

</div>
</div>
</div>
</section>
</footer>

</div>
</div>
</div>
</body>

<script type="text/javascript" src="../../../lib/foundation/dist/foundation.min.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="../../../js/magellan.js"></script>

<style type="text/css">@import "../../../lib/prettify/prettify.css";</style>
<script type="text/javascript" src="../../../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../../../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">jQuery(function(){window.prettyPrint && prettyPrint()});</script>
<script type="text/javascript">jQuery(function(jq){initOldVersionWarnings(jq, '0.0.0+26533-ec68a528-SNAPSHOT', 'https://akka.io/')});</script>


</html>
