<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.11) on Wed Feb 08 11:53:31 CET 2023 -->
<title>LeveldbRecovery</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2023-02-08">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="LeveldbRecovery";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../../";
var useModuleDirectories = false;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.pekko.persistence.journal.leveldb</a></div>
<h2 title="Interface LeveldbRecovery" class="title">Interface LeveldbRecovery</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><code><a href="../AsyncRecovery.html" title="interface in org.apache.pekko.persistence.journal">AsyncRecovery</a></code></dd>
</dl>
<dl>
<dt>All Known Subinterfaces:</dt>
<dd><code><a href="LeveldbStore.html" title="interface in org.apache.pekko.persistence.journal.leveldb">LeveldbStore</a></code></dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="SharedLeveldbStore.html" title="class in org.apache.pekko.persistence.journal.leveldb">SharedLeveldbStore</a></code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">LeveldbRecovery</span>
extends <a href="../AsyncRecovery.html" title="interface in org.apache.pekko.persistence.journal">AsyncRecovery</a></pre>
<div class="block">INTERNAL API.
 <p>
 LevelDB backed message replay and sequence number recovery.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>scala.concurrent.Future&lt;java.lang.Object&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#asyncReadHighestSequenceNr(java.lang.String,long)">asyncReadHighestSequenceNr</a></span>&#8203;(java.lang.String&nbsp;persistenceId,
                          long&nbsp;fromSequenceNr)</code></th>
<td class="colLast">
<div class="block">Plugin API: asynchronously reads the highest stored sequence number for the
 given <code>persistenceId</code>.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>scala.concurrent.Future&lt;scala.runtime.BoxedUnit&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#asyncReplayMessages(java.lang.String,long,long,long,scala.Function1)">asyncReplayMessages</a></span>&#8203;(java.lang.String&nbsp;persistenceId,
                   long&nbsp;fromSequenceNr,
                   long&nbsp;toSequenceNr,
                   long&nbsp;max,
                   scala.Function1&lt;<a href="../../PersistentRepr.html" title="interface in org.apache.pekko.persistence">PersistentRepr</a>,&#8203;scala.runtime.BoxedUnit&gt;&nbsp;replayCallback)</code></th>
<td class="colLast">
<div class="block">Plugin API: asynchronously replays persistent messages.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>scala.concurrent.Future&lt;scala.runtime.BoxedUnit&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#asyncReplayTaggedMessages(java.lang.String,long,long,long,scala.Function1)">asyncReplayTaggedMessages</a></span>&#8203;(java.lang.String&nbsp;tag,
                         long&nbsp;fromSequenceNr,
                         long&nbsp;toSequenceNr,
                         long&nbsp;max,
                         scala.Function1&lt;org.apache.pekko.persistence.journal.leveldb.LeveldbJournal.ReplayedTaggedMessage,&#8203;scala.runtime.BoxedUnit&gt;&nbsp;replayCallback)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#readHighestSequenceNr(int)">readHighestSequenceNr</a></span>&#8203;(int&nbsp;persistenceId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#replayMessages(int,long,long,long,scala.Function1)">replayMessages</a></span>&#8203;(int&nbsp;persistenceId,
              long&nbsp;fromSequenceNr,
              long&nbsp;toSequenceNr,
              long&nbsp;max,
              scala.Function1&lt;<a href="../../PersistentRepr.html" title="interface in org.apache.pekko.persistence">PersistentRepr</a>,&#8203;scala.runtime.BoxedUnit&gt;&nbsp;replayCallback)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#replayTaggedMessages(java.lang.String,int,long,long,long,scala.Function1)">replayTaggedMessages</a></span>&#8203;(java.lang.String&nbsp;tag,
                    int&nbsp;tagNid,
                    long&nbsp;fromSequenceNr,
                    long&nbsp;toSequenceNr,
                    long&nbsp;max,
                    scala.Function1&lt;org.apache.pekko.persistence.journal.leveldb.LeveldbJournal.ReplayedTaggedMessage,&#8203;scala.runtime.BoxedUnit&gt;&nbsp;replayCallback)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="asyncReadHighestSequenceNr(java.lang.String,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>asyncReadHighestSequenceNr</h4>
<pre class="methodSignature">scala.concurrent.Future&lt;java.lang.Object&gt;&nbsp;asyncReadHighestSequenceNr&#8203;(java.lang.String&nbsp;persistenceId,
                                                                     long&nbsp;fromSequenceNr)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../AsyncRecovery.html#asyncReadHighestSequenceNr(java.lang.String,long)">AsyncRecovery</a></code></span></div>
<div class="block">Plugin API: asynchronously reads the highest stored sequence number for the
 given <code>persistenceId</code>. The persistent actor will use the highest sequence
 number after recovery as the starting point when persisting new events.
 This sequence number is also used as <code>toSequenceNr</code> in subsequent call
 to <a href="../AsyncRecovery.html#asyncReplayMessages(java.lang.String,long,long,long,scala.Function1)"><code>AsyncRecovery.asyncReplayMessages(java.lang.String, long, long, long, scala.Function1&lt;org.apache.pekko.persistence.PersistentRepr, scala.runtime.BoxedUnit&gt;)</code></a> unless the user has specified a lower <code>toSequenceNr</code>.
 Journal must maintain the highest sequence number and never decrease it.
 <p>
 This call is protected with a circuit-breaker.
 <p>
 Please also note that requests for the highest sequence number may be made concurrently
 to writes executing for the same <code>persistenceId</code>, in particular it is possible that
 a restarting actor tries to recover before its outstanding writes have completed.
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../AsyncRecovery.html#asyncReadHighestSequenceNr(java.lang.String,long)">asyncReadHighestSequenceNr</a></code>&nbsp;in interface&nbsp;<code><a href="../AsyncRecovery.html" title="interface in org.apache.pekko.persistence.journal">AsyncRecovery</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>persistenceId</code> - persistent actor id.</dd>
<dd><code>fromSequenceNr</code> - hint where to start searching for the highest sequence
                       number. When a persistent actor is recovering this
                       <code>fromSequenceNr</code> will be the sequence number of the used
                       snapshot or <code>0L</code> if no snapshot is used.</dd>
</dl>
</li>
</ul>
<a id="asyncReplayMessages(java.lang.String,long,long,long,scala.Function1)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>asyncReplayMessages</h4>
<pre class="methodSignature">scala.concurrent.Future&lt;scala.runtime.BoxedUnit&gt;&nbsp;asyncReplayMessages&#8203;(java.lang.String&nbsp;persistenceId,
                                                                     long&nbsp;fromSequenceNr,
                                                                     long&nbsp;toSequenceNr,
                                                                     long&nbsp;max,
                                                                     scala.Function1&lt;<a href="../../PersistentRepr.html" title="interface in org.apache.pekko.persistence">PersistentRepr</a>,&#8203;scala.runtime.BoxedUnit&gt;&nbsp;replayCallback)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../AsyncRecovery.html#asyncReplayMessages(java.lang.String,long,long,long,scala.Function1)">AsyncRecovery</a></code></span></div>
<div class="block">Plugin API: asynchronously replays persistent messages. Implementations replay
 a message by calling <code>replayCallback</code>. The returned future must be completed
 when all messages (matching the sequence number bounds) have been replayed.
 The future must be completed with a failure if any of the persistent messages
 could not be replayed.
 <p>
 The <code>replayCallback</code> must also be called with messages that have been marked
 as deleted. In this case a replayed message's <code>deleted</code> method must return
 <code>true</code>.
 <p>
 The <code>toSequenceNr</code> is the lowest of what was returned by <a href="../AsyncRecovery.html#asyncReadHighestSequenceNr(java.lang.String,long)"><code>AsyncRecovery.asyncReadHighestSequenceNr(java.lang.String, long)</code></a>
 and what the user specified as recovery <code>pekko.persistence.Recovery</code> parameter.
 This does imply that this call is always preceded by reading the highest sequence
 number for the given <code>persistenceId</code>.
 <p>
 This call is NOT protected with a circuit-breaker because it may take long time
 to replay all events. The plugin implementation itself must protect against
 an unresponsive backend store and make sure that the returned Future is
 completed with success or failure within reasonable time. It is not allowed
 to ignore completing the future.
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../AsyncRecovery.html#asyncReplayMessages(java.lang.String,long,long,long,scala.Function1)">asyncReplayMessages</a></code>&nbsp;in interface&nbsp;<code><a href="../AsyncRecovery.html" title="interface in org.apache.pekko.persistence.journal">AsyncRecovery</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>persistenceId</code> - persistent actor id.</dd>
<dd><code>fromSequenceNr</code> - sequence number where replay should start (inclusive).</dd>
<dd><code>toSequenceNr</code> - sequence number where replay should end (inclusive).</dd>
<dd><code>max</code> - maximum number of messages to be replayed.</dd>
<dd><code>replayCallback</code> - called to replay a single message. Can be called from any
                       thread.
 <p></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../AsyncWriteJournal.html" title="interface in org.apache.pekko.persistence.journal"><code>AsyncWriteJournal</code></a></dd>
</dl>
</li>
</ul>
<a id="asyncReplayTaggedMessages(java.lang.String,long,long,long,scala.Function1)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>asyncReplayTaggedMessages</h4>
<pre class="methodSignature">scala.concurrent.Future&lt;scala.runtime.BoxedUnit&gt;&nbsp;asyncReplayTaggedMessages&#8203;(java.lang.String&nbsp;tag,
                                                                           long&nbsp;fromSequenceNr,
                                                                           long&nbsp;toSequenceNr,
                                                                           long&nbsp;max,
                                                                           scala.Function1&lt;org.apache.pekko.persistence.journal.leveldb.LeveldbJournal.ReplayedTaggedMessage,&#8203;scala.runtime.BoxedUnit&gt;&nbsp;replayCallback)</pre>
</li>
</ul>
<a id="readHighestSequenceNr(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readHighestSequenceNr</h4>
<pre class="methodSignature">long&nbsp;readHighestSequenceNr&#8203;(int&nbsp;persistenceId)</pre>
</li>
</ul>
<a id="replayMessages(int,long,long,long,scala.Function1)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replayMessages</h4>
<pre class="methodSignature">void&nbsp;replayMessages&#8203;(int&nbsp;persistenceId,
                    long&nbsp;fromSequenceNr,
                    long&nbsp;toSequenceNr,
                    long&nbsp;max,
                    scala.Function1&lt;<a href="../../PersistentRepr.html" title="interface in org.apache.pekko.persistence">PersistentRepr</a>,&#8203;scala.runtime.BoxedUnit&gt;&nbsp;replayCallback)</pre>
</li>
</ul>
<a id="replayTaggedMessages(java.lang.String,int,long,long,long,scala.Function1)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>replayTaggedMessages</h4>
<pre class="methodSignature">void&nbsp;replayTaggedMessages&#8203;(java.lang.String&nbsp;tag,
                          int&nbsp;tagNid,
                          long&nbsp;fromSequenceNr,
                          long&nbsp;toSequenceNr,
                          long&nbsp;max,
                          scala.Function1&lt;org.apache.pekko.persistence.journal.leveldb.LeveldbJournal.ReplayedTaggedMessage,&#8203;scala.runtime.BoxedUnit&gt;&nbsp;replayCallback)</pre>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
