<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="Apache Pekko is a toolkit for building highly concurrent, distributed, and resilient message-driven applications for Java and Scala.">
<meta name="generator" content="Paradox, paradox-material-theme=0.6.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="Apache Pekko is a toolkit for building highly concurrent, distributed, and resilient message-driven applications for Java and Scala.">
<link rel="shortcut icon" href="../assets/images/favicon.png">
<title>Configuration Â· Apache Pekko</title>
<link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../lib/prettify/prettify.css">
<script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../assets/stylesheets/paradox-material-theme.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../index.html" title="Apache Pekko" class="md-header-nav__button md-logo">
<img src="../images/pekko_logo.png" width="24" height="24">
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
Apache Pekko
</span>
<span class="md-header-nav__topic">
Configuration
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/apache/incubator-pekko"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
apache/incubator-pekko
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../index.html" title="Apache Pekko" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<img src="../images/pekko_logo.png" width="24" height="24">
</a>
<a href="../index.html" title="Apache Pekko">
Apache Pekko
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/apache/incubator-pekko"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
apache/incubator-pekko
</div>
</a>

</div>
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
<ul>
  <li><a href="../security/index.html" class="page">Security Announcements</a></li>
  <li><a href="../downloads.html" class="page">Downloads</a></li>
  <li><a href="../documentation.html" class="page">Documentation</a>
  <ul>
    <li><a href="../typed/guide/index.html" class="page">Getting Started Guide</a></li>
    <li><a href="../general/index.html" class="page">General Concepts</a></li>
    <li><a href="../typed/index.html" class="page">Actors</a></li>
    <li><a href="../typed/index-cluster.html" class="page">Cluster</a></li>
    <li><a href="../typed/index-persistence.html" class="page">Persistence (Event Sourcing)</a></li>
    <li><a href="../typed/index-persistence-durable-state.html" class="page">Persistence (Durable State)</a></li>
    <li><a href="../stream/index.html" class="page">Streams</a></li>
    <li><a href="../discovery/index.html" class="page">Discovery</a></li>
    <li><a href="../index-utilities.html" class="page">Utilities</a></li>
    <li><a href="../common/other-modules.html" class="page">Other Apache Pekko modules</a></li>
    <li><a href="../additional/deploy.html" class="page">Package, Deploy and Run</a></li>
    <li><a href="../project/index.html" class="page">Project Information</a></li>
    <li><a href="../index-classic.html" class="page">Pekko Classic</a></li>
  </ul></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../general/configuration.html#configuration" class="header">Configuration</a>
  <ul>
    <li><a href="../general/configuration.html#where-configuration-is-read-from" class="header">Where configuration is read from</a></li>
    <li><a href="../general/configuration.html#when-using-jarjar-onejar-assembly-or-any-jar-bundler" class="header">When using JarJar, OneJar, Assembly or any jar-bundler</a></li>
    <li><a href="../general/configuration.html#custom-application-conf" class="header">Custom application.conf</a></li>
    <li><a href="../general/configuration.html#including-files" class="header">Including files</a></li>
    <li><a href="../general/configuration.html#logging-of-configuration" class="header">Logging of Configuration</a></li>
    <li><a href="../general/configuration.html#a-word-about-classloaders" class="header">A Word About ClassLoaders</a></li>
    <li><a href="../general/configuration.html#application-specific-settings" class="header">Application specific settings</a></li>
    <li><a href="../general/configuration.html#configuring-multiple-actorsystem" class="header">Configuring multiple ActorSystem</a></li>
    <li><a href="../general/configuration.html#reading-configuration-from-a-custom-location" class="header">Reading configuration from a custom location</a></li>
    <li><a href="../general/configuration.html#listing-of-the-reference-configuration" class="header">Listing of the Reference Configuration</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 2.6.20+81-523134c3+20230202-1514*
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../general/configuration.html#configuration" class="header">Configuration</a>
  <ul>
    <li><a href="../general/configuration.html#where-configuration-is-read-from" class="header">Where configuration is read from</a></li>
    <li><a href="../general/configuration.html#when-using-jarjar-onejar-assembly-or-any-jar-bundler" class="header">When using JarJar, OneJar, Assembly or any jar-bundler</a></li>
    <li><a href="../general/configuration.html#custom-application-conf" class="header">Custom application.conf</a></li>
    <li><a href="../general/configuration.html#including-files" class="header">Including files</a></li>
    <li><a href="../general/configuration.html#logging-of-configuration" class="header">Logging of Configuration</a></li>
    <li><a href="../general/configuration.html#a-word-about-classloaders" class="header">A Word About ClassLoaders</a></li>
    <li><a href="../general/configuration.html#application-specific-settings" class="header">Application specific settings</a></li>
    <li><a href="../general/configuration.html#configuring-multiple-actorsystem" class="header">Configuring multiple ActorSystem</a></li>
    <li><a href="../general/configuration.html#reading-configuration-from-a-custom-location" class="header">Reading configuration from a custom location</a></li>
    <li><a href="../general/configuration.html#listing-of-the-reference-configuration" class="header">Listing of the Reference Configuration</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#configuration" name="configuration" class="anchor"><span class="anchor-link"></span></a>Configuration</h1>
<p>You can start using Pekko without defining any configuration, since sensible default values are provided. Later on you might need to amend the settings to change the default behavior or adapt for specific runtime environments. Typical examples of settings that you might amend:</p>
<ul>
  <li><a href="../typed/logging.html">log level and logger backend</a></li>
  <li><a href="../typed/cluster.html">enable Cluster</a></li>
  <li><a href="../serialization.html">message serializers</a></li>
  <li><a href="../typed/dispatchers.html">tuning of dispatchers</a></li>
</ul>
<p>Pekko uses the <a href="https://github.com/lightbend/config">Typesafe Config Library</a>, which might also be a good choice for the configuration of your own application or library built with or without Pekko. This library is implemented in Java with no external dependencies; This is only a summary of the most important parts for more details see <a href="https://github.com/lightbend/config/blob/master/README.md">the config library docs</a>.</p>
<h2><a href="#where-configuration-is-read-from" name="where-configuration-is-read-from" class="anchor"><span class="anchor-link"></span></a>Where configuration is read from</h2>
<p>All configuration for Pekko is held within instances of <span class="group-scala"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/actor/typed/ActorSystem.html" title="org.apache.pekko.actor.typed.ActorSystem"><code>ActorSystem</code></a></span><span class="group-java"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/actor/typed/ActorSystem.html" title="org.apache.pekko.actor.typed.ActorSystem"><code>ActorSystem</code></a></span>, or put differently, as viewed from the outside, <span class="group-scala"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/actor/typed/ActorSystem.html" title="org.apache.pekko.actor.typed.ActorSystem"><code>ActorSystem</code></a></span><span class="group-java"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/actor/typed/ActorSystem.html" title="org.apache.pekko.actor.typed.ActorSystem"><code>ActorSystem</code></a></span> is the only consumer of configuration information. While constructing an actor system, you can either pass in a <a href="https://lightbend.github.io/config/latest/api/index.html?com/typesafe/config/Config.html">Config</a> object or not, where the second case is equivalent to passing <a href="https://lightbend.github.io/config/latest/api/com/typesafe/config/ConfigFactory.html#load-java.lang.ClassLoader-">ConfigFactory.load()</a> (with the right class loader). This means roughly that the default is to parse all <code>application.conf</code>, <code>application.json</code> and <code>application.properties</code> found at the root of the class pathâplease refer to the aforementioned documentation for details. The actor system then merges in all <code>reference.conf</code> resources found at the root of the class path to form the fallback configuration, i.e. it internally uses</p>
<pre class="prettyprint"><code class="language-scala">appConfig.withFallback(ConfigFactory.defaultReference(classLoader))
</code></pre>
<p>The philosophy is that code never contains default values, but instead relies upon their presence in the <code>reference.conf</code> supplied with the library in question.</p>
<p>Highest precedence is given to overrides given as system properties, see <a href="https://github.com/typesafehub/config/blob/master/HOCON.md">the HOCON specification</a> (near the bottom). Also noteworthy is that the application configurationâwhich defaults to <code>application</code>âmay be overridden using the <code>config.resource</code> property (there are more, please refer to the <a href="https://github.com/typesafehub/config/blob/master/README.md">Config docs</a>).</p><div class="callout note "><div class="callout-title">Note</div>
<p>If you are writing a Pekko application, keep your configuration in <code>application.conf</code> at the root of the class path. If you are writing an Pekko-based library, keep its configuration in <code>reference.conf</code> at the root of the JAR file. It&rsquo;s not supported to override a config property owned by one library in a <code>reference.conf</code> of another library.</p></div>
<h2><a href="#when-using-jarjar-onejar-assembly-or-any-jar-bundler" name="when-using-jarjar-onejar-assembly-or-any-jar-bundler" class="anchor"><span class="anchor-link"></span></a>When using JarJar, OneJar, Assembly or any jar-bundler</h2><div class="callout warning "><div class="callout-title">Warning</div>
<p>Pekko&rsquo;s configuration approach relies heavily on the notion of every module/jar having its own <code>reference.conf</code> file. All of these will be discovered by the configuration and loaded. Unfortunately this also means that if you put/merge multiple jars into the same jar, you need to merge all the <code>reference.conf</code> files as well: otherwise all defaults will be lost.</p></div>
<p>See the <a href="../additional/deploy.html">deployment documentation</a> for information on how to merge the <code>reference.conf</code> resources while bundling.</p>
<h2><a href="#custom-application-conf" name="custom-application-conf" class="anchor"><span class="anchor-link"></span></a>Custom application.conf</h2>
<p>A custom <code>application.conf</code> might look like this:</p>
<pre><code># In this file you can override any option defined in the reference files.
# Copy in parts of the reference files and modify as you please.

pekko {

  # Logger config for Pekko internals and classic actors, the new API relies
  # directly on SLF4J and your config for the logger backend.

  # Loggers to register at boot time (org.apache.pekko.event.Logging$DefaultLogger logs
  # to STDOUT)
  loggers = [&quot;org.apache.pekko.event.slf4j.Slf4jLogger&quot;]

  # Log level used by the configured loggers (see &quot;loggers&quot;) as soon
  # as they have been started; before that, see &quot;stdout-loglevel&quot;
  # Options: OFF, ERROR, WARNING, INFO, DEBUG
  loglevel = &quot;DEBUG&quot;

  # Log level for the very basic logger activated during ActorSystem startup.
  # This logger prints the log messages to stdout (System.out).
  # Options: OFF, ERROR, WARNING, INFO, DEBUG
  stdout-loglevel = &quot;DEBUG&quot;

  # Filter of log events that is used by the LoggingAdapter before
  # publishing log events to the eventStream.
  logging-filter = &quot;org.apache.pekko.event.slf4j.Slf4jLoggingFilter&quot;

  actor {
    provider = &quot;cluster&quot;

    default-dispatcher {
      # Throughput for default Dispatcher, set to 1 for as fair as possible
      throughput = 10
    }
  }

  remote.artery {
    # The port clients should connect to.
    canonical.port = 4711
  }
}
</code></pre>
<h2><a href="#including-files" name="including-files" class="anchor"><span class="anchor-link"></span></a>Including files</h2>
<p>Sometimes, it can be useful to include another configuration file, for example if you have one <code>application.conf</code> with all environment independent settings and then override some settings for specific environments.</p>
<p>Specifying system property with <code>-Dconfig.resource=/dev.conf</code> will load the <code>dev.conf</code> file, which includes the <code>application.conf</code></p>
<h3><a href="#dev-conf" name="dev-conf" class="anchor"><span class="anchor-link"></span></a>dev.conf</h3>
<pre><code>include &quot;application&quot;

pekko {
  loglevel = &quot;DEBUG&quot;
}
</code></pre>
<p>More advanced include and substitution mechanisms are explained in the <a href="https://github.com/typesafehub/config/blob/master/HOCON.md">HOCON</a> specification.</p>
<a id="dpekko-log-config-on-start"></a>
<h2><a href="#logging-of-configuration" name="logging-of-configuration" class="anchor"><span class="anchor-link"></span></a>Logging of Configuration</h2>
<p>If the system or config property <code>pekko.log-config-on-start</code> is set to <code>on</code>, then the complete configuration is logged at INFO level when the actor system is started. This is useful when you are uncertain of what configuration is used.</p><div class="group-scala">
<p>If in doubt, you can inspect your configuration objects before or after using them to construct an actor system:</p>
<pre><code>Welcome to Scala 2.12 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0).
Type in expressions to have them evaluated.
Type :help for more information.

scala&gt; import com.typesafe.config._
import com.typesafe.config._

scala&gt; ConfigFactory.parseString(&quot;a.b=12&quot;)
res0: com.typesafe.config.Config = Config(SimpleConfigObject({&quot;a&quot; : {&quot;b&quot; : 12}}))

scala&gt; res0.root.render
res1: java.lang.String =
{
    # String: 1
    &quot;a&quot; : {
        # String: 1
        &quot;b&quot; : 12
    }
}
</code></pre></div>
<p>The comments preceding every item give detailed information about the origin of the setting (file &amp; line number) plus possible comments which were present, e.g. in the reference configuration. The settings as merged with the reference and parsed by the actor system can be displayed like this:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/apache/incubator-pekko/tree/main/docs/src/test/scala/docs/config/ConfigDocSpec.scala#L42-L43" target="_blank" title="Go to snippet source">source</a><code class="language-scala">val system = ActorSystem(rootBehavior, &quot;MySystem&quot;)
system.logConfiguration()</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/apache/incubator-pekko/tree/main/docs/src/test/java/jdocs/config/ConfigDocTest.java#L44-L45" target="_blank" title="Go to snippet source">source</a><code class="language-java">ActorSystem&lt;Void&gt; system = ActorSystem.create(rootBehavior, &quot;MySystem&quot;);
system.logConfiguration();</code></pre></dd>
</dl>
<h2><a href="#a-word-about-classloaders" name="a-word-about-classloaders" class="anchor"><span class="anchor-link"></span></a>A Word About ClassLoaders</h2>
<p>In several places of the configuration file it is possible to specify the fully-qualified class name of something to be instantiated by Pekko. This is done using Java reflection, which in turn uses a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/ClassLoader.html" title="java.lang.ClassLoader"><code>ClassLoader</code></a>. Getting the right one in challenging environments like application containers or OSGi bundles is not always trivial, the current approach of Pekko is that each <span class="group-scala"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/actor/typed/ActorSystem.html" title="org.apache.pekko.actor.typed.ActorSystem"><code>ActorSystem</code></a></span><span class="group-java"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/actor/typed/ActorSystem.html" title="org.apache.pekko.actor.typed.ActorSystem"><code>ActorSystem</code></a></span> implementation stores the current threadâs context class loader (if available, otherwise just its own loader as in <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Class.html#getClassLoader()" title="java.lang.Class"><code>this.getClass.getClassLoader</code></a>) and uses that for all reflective accesses. This implies that putting Pekko on the boot class path will yield <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/NullPointerException.html" title="java.lang.NullPointerException"><code>NullPointerException</code></a> from strange places: this is not supported.</p>
<h2><a href="#application-specific-settings" name="application-specific-settings" class="anchor"><span class="anchor-link"></span></a>Application specific settings</h2>
<p>The configuration can also be used for application specific settings. A good practice is to place those settings in an <a href="../extending-pekko.html#extending-pekko-settings">Extension</a>.</p>
<h2><a href="#configuring-multiple-actorsystem" name="configuring-multiple-actorsystem" class="anchor"><span class="anchor-link"></span></a>Configuring multiple ActorSystem</h2>
<p>If you have more than one <span class="group-scala"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/actor/typed/ActorSystem.html" title="org.apache.pekko.actor.typed.ActorSystem"><code>ActorSystem</code></a></span><span class="group-java"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/actor/typed/ActorSystem.html" title="org.apache.pekko.actor.typed.ActorSystem"><code>ActorSystem</code></a></span> (or you&rsquo;re writing a library and have an <span class="group-scala"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/actor/typed/ActorSystem.html" title="org.apache.pekko.actor.typed.ActorSystem"><code>ActorSystem</code></a></span><span class="group-java"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/actor/typed/ActorSystem.html" title="org.apache.pekko.actor.typed.ActorSystem"><code>ActorSystem</code></a></span> that may be separate from the application&rsquo;s) you may want to separate the configuration for each system.</p>
<p>Given that <a href="https://lightbend.github.io/config/latest/api/com/typesafe/config/ConfigFactory.html#load--">ConfigFactory.load()</a> merges all resources with matching name from the whole class path, it is easiest to utilize that functionality and differentiate actor systems within the hierarchy of the configuration:</p>
<pre><code>myapp1 {
  pekko.loglevel = &quot;WARNING&quot;
  my.own.setting = 43
}
myapp2 {
  pekko.loglevel = &quot;ERROR&quot;
  app2.setting = &quot;appname&quot;
}
my.own.setting = 42
my.other.setting = &quot;hello&quot;
</code></pre>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/apache/incubator-pekko/tree/main/docs/src/test/scala/docs/config/ConfigDocSpec.scala#L49-L52" target="_blank" title="Go to snippet source">source</a><code class="language-scala">val config = ConfigFactory.load()
val app1 = ActorSystem(rootBehavior, &quot;MyApp1&quot;, config.getConfig(&quot;myapp1&quot;).withFallback(config))
val app2 =
  ActorSystem(rootBehavior, &quot;MyApp2&quot;, config.getConfig(&quot;myapp2&quot;).withOnlyPath(&quot;pekko&quot;).withFallback(config))</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/apache/incubator-pekko/tree/main/docs/src/test/java/jdocs/config/ConfigDocTest.java#L51-L58" target="_blank" title="Go to snippet source">source</a><code class="language-java">Config config = ConfigFactory.load();
ActorSystem&lt;Void&gt; app1 =
    ActorSystem.create(rootBehavior, &quot;MyApp1&quot;, config.getConfig(&quot;myapp1&quot;).withFallback(config));
ActorSystem&lt;Void&gt; app2 =
    ActorSystem.create(
        rootBehavior,
        &quot;MyApp2&quot;,
        config.getConfig(&quot;myapp2&quot;).withOnlyPath(&quot;pekko&quot;).withFallback(config));</code></pre></dd>
</dl>
<p>These two samples demonstrate different variations of the âlift-a-subtreeâ trick: in the first case, the configuration accessible from within the actor system is this</p>
<pre class="prettyprint"><code class="language-ruby">pekko.loglevel = &quot;WARNING&quot;
my.own.setting = 43
my.other.setting = &quot;hello&quot;
// plus myapp1 and myapp2 subtrees
</code></pre>
<p>while in the second one, only the âpekkoâ subtree is lifted, with the following result</p>
<pre class="prettyprint"><code class="language-ruby">pekko.loglevel = &quot;ERROR&quot;
my.own.setting = 42
my.other.setting = &quot;hello&quot;
// plus myapp1 and myapp2 subtrees
</code></pre><div class="callout note "><div class="callout-title">Note</div>
<p>The configuration library is really powerful, explaining all features exceeds the scope affordable here. In particular not covered are how to include other configuration files within other files (see a small example at <a href="#including-files">Including files</a>) and copying parts of the configuration tree by way of path substitutions.</p></div>
<p>You may also specify and parse the configuration programmatically in other ways when instantiating the <span class="group-scala"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/actor/typed/ActorSystem.html" title="org.apache.pekko.actor.typed.ActorSystem"><code>ActorSystem</code></a></span><span class="group-java"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/actor/typed/ActorSystem.html" title="org.apache.pekko.actor.typed.ActorSystem"><code>ActorSystem</code></a></span>.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/apache/incubator-pekko/tree/main/docs/src/test/scala/docs/config/ConfigDocSpec.scala#L22-L23" target="_blank" title="Go to snippet source">source</a><code class="language-scala">import org.apache.pekko.actor.typed.ActorSystem
import com.typesafe.config.ConfigFactory
val customConf = ConfigFactory.parseString(&quot;&quot;&quot;
  pekko.log-config-on-start = on
&quot;&quot;&quot;)
// ConfigFactory.load sandwiches customConfig between default reference
// config and default overrides, and then resolves it.
val system = ActorSystem(rootBehavior, &quot;MySystem&quot;, ConfigFactory.load(customConf))</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/apache/incubator-pekko/tree/main/docs/src/test/java/jdocs/config/ConfigDocTest.java#L17-L22" target="_blank" title="Go to snippet source">source</a><code class="language-java">import org.apache.pekko.actor.typed.ActorSystem;
import org.apache.pekko.actor.typed.Behavior;
import org.apache.pekko.actor.typed.javadsl.Behaviors;
import com.typesafe.config.Config;
import com.typesafe.config.ConfigFactory;

Config customConf = ConfigFactory.parseString(&quot;pekko.log-config-on-start = on&quot;);
// ConfigFactory.load sandwiches customConfig between default reference
// config and default overrides, and then resolves it.
ActorSystem&lt;Void&gt; system =
    ActorSystem.create(rootBehavior, &quot;MySystem&quot;, ConfigFactory.load(customConf));</code></pre></dd>
</dl>
<h2><a href="#reading-configuration-from-a-custom-location" name="reading-configuration-from-a-custom-location" class="anchor"><span class="anchor-link"></span></a>Reading configuration from a custom location</h2>
<p>You can replace or supplement <code>application.conf</code> either in code or using system properties.</p>
<p>If you&rsquo;re using <a href="https://lightbend.github.io/config/latest/api/com/typesafe/config/ConfigFactory.html#load--">ConfigFactory.load()</a> (which Pekko does by default) you can replace <code>application.conf</code> by defining <code>-Dconfig.resource=whatever</code>, <code>-Dconfig.file=whatever</code>, or <code>-Dconfig.url=whatever</code>.</p>
<p>From inside your replacement file specified with <code>-Dconfig.resource</code> and friends, you can <code>include
&quot;application&quot;</code> if you still want to use <code>application.{conf,json,properties}</code> as well. Settings specified before <code>include &quot;application&quot;</code> would be overridden by the included file, while those after would override the included file.</p>
<p>In code, there are many customization options.</p>
<p>There are several overloads of <a href="https://lightbend.github.io/config/latest/api/com/typesafe/config/ConfigFactory.html#load--">ConfigFactory.load()</a>; these allow you to specify something to be sandwiched between system properties (which override) and the defaults (from <code>reference.conf</code>), replacing the usual <code>application.{conf,json,properties}</code> and replacing <code>-Dconfig.file</code> and friends.</p>
<p>The simplest variant of <a href="https://lightbend.github.io/config/latest/api/com/typesafe/config/ConfigFactory.html#load-java.lang.String-">ConfigFactory.load()</a> takes a resource basename (instead of <code>application</code>); <code>myname.conf</code>, <code>myname.json</code>, and <code>myname.properties</code> would then be used instead of <code>application.{conf,json,properties}</code>.</p>
<p>The most flexible variant takes a <a href="https://lightbend.github.io/config/latest/api/com/typesafe/config/Config.html">Config</a> object, which you can load using any method in <a href="https://lightbend.github.io/config/latest/api/com/typesafe/config/ConfigFactory.html">ConfigFactory</a>. For example you could put a config string in code using <a href="https://lightbend.github.io/config/latest/api/com/typesafe/config/ConfigFactory.html#parseString-java.lang.String-">ConfigFactory.parseString()</a> or you could make a map and <a href="https://lightbend.github.io/config/latest/api/com/typesafe/config/ConfigFactory.html#parseMap-java.util.Map-">ConfigFactory.parseMap()</a>, or you could load a file.</p>
<p>You can also combine your custom config with the usual config, that might look like:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/apache/incubator-pekko/tree/main/docs/src/test/scala/docs/config/ConfigDocSpec.scala#L58-L69" target="_blank" title="Go to snippet source">source</a><code class="language-scala">// make a Config with just your special setting
val myConfig = ConfigFactory.parseString(&quot;something=somethingElse&quot;);
// load the normal config stack (system props,
// then application.conf, then reference.conf)
val regularConfig = ConfigFactory.load();
// override regular stack with myConfig
val combined = myConfig.withFallback(regularConfig);
// put the result in between the overrides
// (system props) and defaults again
val complete = ConfigFactory.load(combined);
// create ActorSystem
val system = ActorSystem(rootBehavior, &quot;myname&quot;, complete);</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/apache/incubator-pekko/tree/main/docs/src/test/java/jdocs/config/ConfigDocTest.java#L64-L75" target="_blank" title="Go to snippet source">source</a><code class="language-java">// make a Config with just your special setting
Config myConfig = ConfigFactory.parseString(&quot;something=somethingElse&quot;);
// load the normal config stack (system props,
// then application.conf, then reference.conf)
Config regularConfig = ConfigFactory.load();
// override regular stack with myConfig
Config combined = myConfig.withFallback(regularConfig);
// put the result in between the overrides
// (system props) and defaults again
Config complete = ConfigFactory.load(combined);
// create ActorSystem
ActorSystem system = ActorSystem.create(rootBehavior, &quot;myname&quot;, complete);</code></pre></dd>
</dl>
<p>When working with <a href="https://lightbend.github.io/config/latest/api/com/typesafe/config/Config.html">Config</a> objects, keep in mind that there are three &ldquo;layers&rdquo; in the cake:</p>
<ul>
  <li><a href="https://lightbend.github.io/config/latest/api/com/typesafe/config/ConfigFactory.html#defaultOverrides--">ConfigFactory.defaultOverrides()</a> (system properties)</li>
  <li>the app&rsquo;s settings</li>
  <li><a href="https://lightbend.github.io/config/latest/api/com/typesafe/config/ConfigFactory.html#defaultReference--">ConfigFactory.defaultReference()</a> (reference.conf)</li>
</ul>
<p>The normal goal is to customize the middle layer while leaving the other two alone.</p>
<ul>
  <li><a href="https://lightbend.github.io/config/latest/api/com/typesafe/config/ConfigFactory.html#load--">ConfigFactory.load()</a> loads the whole stack</li>
  <li>the overloads of <a href="https://lightbend.github.io/config/latest/api/com/typesafe/config/ConfigFactory.html">ConfigFactory.load()</a> let you specify a different middle layer</li>
  <li>the <a href="https://lightbend.github.io/config/latest/api/com/typesafe/config/ConfigFactory.html">ConfigFactory.parse</a> variations load single files or resources</li>
</ul>
<p>To stack two layers, use <a href="https://lightbend.github.io/config/latest/api/com/typesafe/config/Config.html#withFallback-com.typesafe.config.ConfigMergeable-">override.withFallback(fallback)</a>; try to keep system props (<a href="https://lightbend.github.io/config/latest/api/com/typesafe/config/ConfigFactory.html#defaultOverrides--">defaultOverrides()</a>) on top and <code>reference.conf</code> (<a href="https://lightbend.github.io/config/latest/api/com/typesafe/config/ConfigFactory.html#defaultReference--">defaultReference()</a>) on the bottom.</p>
<p>Do keep in mind, you can often just add another <code>include</code> statement in <code>application.conf</code> rather than writing code. Includes at the top of <code>application.conf</code> will be overridden by the rest of <code>application.conf</code>, while those at the bottom will override the earlier stuff.</p>
<h2><a href="#listing-of-the-reference-configuration" name="listing-of-the-reference-configuration" class="anchor"><span class="anchor-link"></span></a>Listing of the Reference Configuration</h2>
<p>Each Pekko module has a reference configuration file with the default values. Those <code>reference.conf</code> files are listed in <a href="configuration-reference.html">Default configuration</a></p>
</div>
<div>
<a href="https://github.com/apache/incubator-pekko/tree/main/docs/src/main/paradox/general/configuration.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
2.6.20+81-523134c3+20230202-1514*
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../general/message-delivery-reliability.html" title="Message Delivery Reliability" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Message Delivery Reliability
</span>
</div>
</a>
<a href="../general/configuration-reference.html" title="Default configuration" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Default configuration
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
Copyright Â© 2023 The Apache Software Foundation, Licensed under the Apache License, Version 2.0
</div>
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="../assets/javascripts/application.583bbe55.js"></script>
<script src="../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../."}})</script>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
<script src="../assets/js/groups.js"></script>
</body>
</html>
