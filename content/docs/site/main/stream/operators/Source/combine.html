<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="Apache Pekko is a toolkit for building highly concurrent, distributed, and resilient message-driven applications for Java and Scala.">
<meta name="generator" content="Paradox, paradox-material-theme=0.6.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="Apache Pekko is a toolkit for building highly concurrent, distributed, and resilient message-driven applications for Java and Scala.">
<link rel="shortcut icon" href="../../../assets/images/favicon.png">
<title>Source.combine · Apache Pekko</title>
<link rel="stylesheet" href="../../../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../../../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../../../lib/prettify/prettify.css">
<script src="../../../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../../../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../../../assets/stylesheets/paradox-material-theme.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../../../index.html" title="Apache Pekko" class="md-header-nav__button md-logo">
<img src="../../../images/pekko_logo.png" width="24" height="24">
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
Apache Pekko
</span>
<span class="md-header-nav__topic">
Source.combine
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/apache/incubator-pekko"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
apache/incubator-pekko
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../../../index.html" title="Apache Pekko" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<img src="../../../images/pekko_logo.png" width="24" height="24">
</a>
<a href="../../../index.html" title="Apache Pekko">
Apache Pekko
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/apache/incubator-pekko"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
apache/incubator-pekko
</div>
</a>

</div>
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
<ul>
  <li><a href="../../../security/index.html" class="page">Security Announcements</a></li>
  <li><a href="../../../downloads.html" class="page">Downloads</a></li>
  <li><a href="../../../documentation.html" class="page">Documentation</a>
  <ul>
    <li><a href="../../../typed/guide/index.html" class="page">Getting Started Guide</a></li>
    <li><a href="../../../general/index.html" class="page">General Concepts</a></li>
    <li><a href="../../../typed/index.html" class="page">Actors</a></li>
    <li><a href="../../../typed/index-cluster.html" class="page">Cluster</a></li>
    <li><a href="../../../typed/index-persistence.html" class="page">Persistence (Event Sourcing)</a></li>
    <li><a href="../../../typed/index-persistence-durable-state.html" class="page">Persistence (Durable State)</a></li>
    <li><a href="../../../stream/index.html" class="page">Streams</a></li>
    <li><a href="../../../discovery/index.html" class="page">Discovery</a></li>
    <li><a href="../../../index-utilities.html" class="page">Utilities</a></li>
    <li><a href="../../../common/other-modules.html" class="page">Other Apache Pekko modules</a></li>
    <li><a href="../../../additional/deploy.html" class="page">Package, Deploy and Run</a></li>
    <li><a href="../../../project/index.html" class="page">Project Information</a></li>
    <li><a href="../../../index-classic.html" class="page">Pekko Classic</a></li>
  </ul></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../../stream/operators/Source/combine.html#source-combine" class="header">Source.combine</a>
  <ul>
    <li><a href="../../../stream/operators/Source/combine.html#signature" class="header">Signature</a></li>
    <li><a href="../../../stream/operators/Source/combine.html#description" class="header">Description</a></li>
    <li><a href="../../../stream/operators/Source/combine.html#examples" class="header">Examples</a></li>
    <li><a href="../../../stream/operators/Source/combine.html#reactive-streams-semantics" class="header">Reactive Streams semantics</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 2.6.20+81-523134c3+20230202-1514*
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../../stream/operators/Source/combine.html#source-combine" class="header">Source.combine</a>
  <ul>
    <li><a href="../../../stream/operators/Source/combine.html#signature" class="header">Signature</a></li>
    <li><a href="../../../stream/operators/Source/combine.html#description" class="header">Description</a></li>
    <li><a href="../../../stream/operators/Source/combine.html#examples" class="header">Examples</a></li>
    <li><a href="../../../stream/operators/Source/combine.html#reactive-streams-semantics" class="header">Reactive Streams semantics</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#source-combine" name="source-combine" class="anchor"><span class="anchor-link"></span></a>Source.combine</h1>
<p>Combine several sources, using a given strategy such as merge or concat, into one source.</p>
<p><a href="../index.html#source-operators">Source operators</a></p>
<h2><a href="#signature" name="signature" class="anchor"><span class="anchor-link"></span></a>Signature</h2>
<p><span class="group-java"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/stream/javadsl/Source$.html#combine(org.apache.pekko.stream.javadsl.Source,org.apache.pekko.stream.javadsl.Source,java.util.List,org.apache.pekko.japi.function.Function)" title="org.apache.pekko.stream.javadsl.Source"><code>Source.combine</code></a></span><span class="group-scala"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/stream/scaladsl/Source$.html#combine[T,U](first:org.apache.pekko.stream.scaladsl.Source[T,_],second:org.apache.pekko.stream.scaladsl.Source[T,_],rest:org.apache.pekko.stream.scaladsl.Source[T,_]*)(strategy:Int=&gt;org.apache.pekko.stream.Graph[org.apache.pekko.stream.UniformFanInShape[T,U],org.apache.pekko.NotUsed]):org.apache.pekko.stream.scaladsl.Source[U,org.apache.pekko.NotUsed]" title="org.apache.pekko.stream.scaladsl.Source"><code>Source.combine</code></a></span></p>
<h2><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h2>
<p>Provides a way to create a &ldquo;fan-in&rdquo; of multiple sources without having to use the more advanced <a href="../../stream-graphs.html#constructing-graphs">GraphDSL</a>.</p>
<p>The way the elements from the sources are combined is pluggable through the <code>strategy</code> parameter which accepts a function <span class="group-scala"><code>Int =&gt; Graph[FanInShape]</code></span><span class="group-java"><code>Integer -&gt; Graph&lt;FanInShape&gt;</code></span> where the integer parameter specifies the number of sources that the graph must accept. This makes it possible to use <code>combine</code> with the built-in <code>Concat</code> and <code>Merge</code> by <span class="group-scala">expanding their <code>apply</code> methods to functions</span><span class="group-java">using a method reference to their <code>create</code> methods</span>, but also to use an arbitrary strategy. </p>
<p>Combine is most useful when you have more sources than 2 or want to use a custom operator, as there are more concise operators for 2-source <a href="../Source-or-Flow/concat.html">concat</a> and <a href="../Source-or-Flow/merge.html">merge</a> </p>
<p>Some of the built-in operators that can be used as strategy are:</p>
<ul>
  <li><span class="group-java"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/stream/javadsl/Merge.html" title="org.apache.pekko.stream.javadsl.Merge"><code>Merge</code></a></span><span class="group-scala"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/stream/scaladsl/Merge.html" title="org.apache.pekko.stream.scaladsl.Merge"><code>Merge</code></a></span></li>
  <li><span class="group-java"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/stream/javadsl/Concat.html" title="org.apache.pekko.stream.javadsl.Concat"><code>Concat</code></a></span><span class="group-scala"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/stream/scaladsl/Concat.html" title="org.apache.pekko.stream.scaladsl.Concat"><code>Concat</code></a></span></li>
  <li><span class="group-java"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/stream/javadsl/MergePrioritized.html" title="org.apache.pekko.stream.javadsl.MergePrioritized"><code>MergePrioritized</code></a></span><span class="group-scala"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/stream/scaladsl/MergePrioritized.html" title="org.apache.pekko.stream.scaladsl.MergePrioritized"><code>MergePrioritized</code></a></span></li>
  <li><span class="group-java"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/stream/javadsl/MergeLatest.html" title="org.apache.pekko.stream.javadsl.MergeLatest"><code>MergeLatest</code></a></span><span class="group-scala"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/stream/scaladsl/MergeLatest.html" title="org.apache.pekko.stream.scaladsl.MergeLatest"><code>MergeLatest</code></a></span></li>
  <li><span class="group-java"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/stream/javadsl/ZipN.html" title="org.apache.pekko.stream.javadsl.ZipN"><code>ZipN</code></a></span><span class="group-scala"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/stream/scaladsl/ZipN.html" title="org.apache.pekko.stream.scaladsl.ZipN"><code>ZipN</code></a></span></li>
  <li><span class="group-java"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/stream/javadsl/ZipWithN.html" title="org.apache.pekko.stream.javadsl.ZipWithN"><code>ZipWithN</code></a></span><span class="group-scala"><a href="https://pekko.apache.org/api/pekko/2.6.20+81-523134c3+20230202-1514-SNAPSHOT/org/apache/pekko/stream/scaladsl/ZipWithN.html" title="org.apache.pekko.stream.scaladsl.ZipWithN"><code>ZipWithN</code></a></span></li>
</ul>
<h2><a href="#examples" name="examples" class="anchor"><span class="anchor-link"></span></a>Examples</h2>
<p>In this example we <code>Merge</code> three different sources of integers. The three sources will immediately start contributing elements to the combined source. The individual elements from each source will be in order but the order compared to elements from other sources is not deterministic:</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/apache/incubator-pekko/tree/main/docs/src/test/scala/docs/stream/operators/source/Combine.scala#L18-L20" target="_blank" title="Go to snippet source">source</a><code class="language-scala">import org.apache.pekko.stream.scaladsl.{ Concat, Merge, Source }
// ...

val source1 = Source(1 to 3)
val source2 = Source(8 to 10)
val source3 = Source(12 to 14)
val combined = Source.combine(source1, source2, source3)(Merge(_))
combined.runForeach(println)
// could print (order between sources is not deterministic)
// 1
// 12
// 8
// 9
// 13
// 14
// 2
// 10
// 3</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/apache/incubator-pekko/tree/main/docs/src/test/java/jdocs/stream/operators/source/Combine.java#L19-L23" target="_blank" title="Go to snippet source">source</a><code class="language-java">import org.apache.pekko.stream.javadsl.Concat;
import org.apache.pekko.stream.javadsl.Merge;
import org.apache.pekko.stream.javadsl.Source;
// ...

Source&lt;Integer, NotUsed&gt; source1 = Source.range(1, 3);
Source&lt;Integer, NotUsed&gt; source2 = Source.range(8, 10);
Source&lt;Integer, NotUsed&gt; source3 = Source.range(12, 14);

final Source&lt;Integer, NotUsed&gt; combined =
    Source.combine(source1, source2, Collections.singletonList(source3), Merge::create);

combined.runForeach(System.out::println, system);
// could print (order between sources is not deterministic)
// 1
// 12
// 8
// 9
// 13
// 14
// 2
// 10
// 3</code></pre></dd>
</dl>
<p>If we instead use <code>Concat</code> the first source will get to emit elements until it completes, then the second source until that completes and so on until all the sources has completed.</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/apache/incubator-pekko/tree/main/docs/src/test/scala/docs/stream/operators/source/Combine.scala#L49-L63" target="_blank" title="Go to snippet source">source</a><code class="language-scala">val source1 = Source(1 to 3)
val source2 = Source(8 to 10)
val source3 = Source(12 to 14)
val sources = Source.combine(source1, source2, source3)(Concat(_))
sources.runForeach(println)
// prints (order is deterministic)
// 1
// 2
// 3
// 8
// 9
// 10
// 12
// 13
// 14</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><button class="snippet-button copy-snippet" title="Copy snippet to clipboard">copy</button><a class="snippet-button go-to-source" href="https://github.com/apache/incubator-pekko/tree/main/docs/src/test/java/jdocs/stream/operators/source/Combine.java#L56-L73" target="_blank" title="Go to snippet source">source</a><code class="language-java">Source&lt;Integer, NotUsed&gt; source1 = Source.range(1, 3);
Source&lt;Integer, NotUsed&gt; source2 = Source.range(8, 10);
Source&lt;Integer, NotUsed&gt; source3 = Source.range(12, 14);

final Source&lt;Integer, NotUsed&gt; sources =
    Source.combine(source1, source2, Collections.singletonList(source3), Concat::create);

sources.runForeach(System.out::println, system);
// prints (order is deterministic)
// 1
// 2
// 3
// 8
// 9
// 10
// 12
// 13
// 14</code></pre></dd>
</dl>
<h2><a href="#reactive-streams-semantics" name="reactive-streams-semantics" class="anchor"><span class="anchor-link"></span></a>Reactive Streams semantics</h2><div class="callout">
<p><strong>emits</strong> when there is demand, but depending on the strategy</p>
<p><strong>completes</strong> depends on the strategy</p></div>
</div>
<div>
<a href="https://github.com/apache/incubator-pekko/tree/main/docs/src/main/paradox/stream/operators/Source/combine.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
2.6.20+81-523134c3+20230202-1514*
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../../../stream/operators/Source-or-Flow/collectType.html" title="collectType" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
collectType
</span>
</div>
</a>
<a href="../../../stream/operators/Sink/combine.html" title="Sink.combine" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Sink.combine
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
Copyright © 2023 The Apache Software Foundation, Licensed under the Apache License, Version 2.0
</div>
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="../../../assets/javascripts/application.583bbe55.js"></script>
<script src="../../../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../../../."}})</script>
<script type="text/javascript" src="../../../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../../../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
<script src="../../../assets/js/groups.js"></script>
</body>
</html>
